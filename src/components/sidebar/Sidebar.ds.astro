---
import SidebarComponent from "./Sidebar";
import DSBlock from "@/components/design-system/DSBlock.astro";
import DSPreview from "@/components/design-system/DSPreview.astro";
import DSCode from "@/components/design-system/DSCode.astro";
import DSPropsTable from "@/components/design-system/DSPropsTable.astro";
import DSSectionHeader from "@/components/design-system/DSSectionHeader.astro";

const demoSections = [
  {
    title: "Getting Started",
    items: [
      { label: "Overview", href: "#colors" },
      { label: "Installation", href: "#typography" },
    ],
  },
  {
    title: "Components",
    items: [
      { label: "Button", href: "#button", framework: "solid" as const },
      { label: "Card", href: "#card", framework: "astro" as const },
    ],
  },
];
---

<section id="sidebar">
  <DSSectionHeader title="Sidebar" atomic="Organism" framework="solid" />
  <p>
    Searchable navigation sidebar with collapsible sections, view detection,
    and auto-scroll to active link. Accepts any <code>SidebarSection[]</code> data.
  </p>

  <DSBlock title="Minimal example">
    <DSPreview>
      <SidebarComponent sections={demoSections} client:load />
    </DSPreview>
    <DSCode>{`<Sidebar
  sections={[
    {
      title: "Getting Started",
      items: [
        { label: "Overview", href: "#overview" },
        { label: "Installation", href: "#install" },
      ],
    },
    {
      title: "Components",
      items: [
        { label: "Button", href: "#button", framework: "solid" },
        { label: "Card", href: "#card", framework: "astro" },
      ],
    },
  ]}
  client:load
/>`}</DSCode>
  </DSBlock>

  <DSBlock title="Props">
    <DSPropsTable
      headers={["Prop", "Type", "Default", "Description"]}
      rows={[
        [{ code: "sections" }, { code: "SidebarSection[]" }, "required", "Navigation tree data"],
        [{ code: "title" }, "string", "—", "Header title (shown in mobile drawer)"],
        [{ code: "class" }, "string", "—", "Additional CSS class"],
      ]}
    />
  </DSBlock>
</section>
