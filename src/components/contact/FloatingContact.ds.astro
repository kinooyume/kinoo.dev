---
/**
 * FloatingContact Component Documentation
 * Design System - Organism
 */
import message from "@/svgs/message.svg?raw";
import DSBlock from "@/components/design-system/DSBlock.astro";
import DSPreview from "@/components/design-system/DSPreview.astro";
import DSCode from "@/components/design-system/DSCode.astro";
import DSPropsTable from "@/components/design-system/DSPropsTable.astro";
import DSNote from "@/components/design-system/DSNote.astro";
---

<section id="floatingcontact">
  <h2>FloatingContact</h2>
  <p class="atomic-label">Organism</p>
  <p>Mobile-only sticky contact button that appears at the bottom of the screen. Auto-hides when the contact section is visible.</p>

  <DSBlock title="Preview">
    <DSPreview class="states-preview">
      <div class="state-demo">
        <span class="state-label">Default State</span>
        <a class="floating-contact-demo primary" href="#floatingcontact">
          <div class="icon-wrapper">
            <Fragment set:html={message} />
          </div>
        </a>
      </div>
      <div class="state-demo">
        <span class="state-label">Hover State</span>
        <a class="floating-contact-demo primary hover-state" href="#floatingcontact">
          <div class="icon-wrapper">
            <Fragment set:html={message} />
          </div>
        </a>
      </div>
      <div class="state-demo">
        <span class="state-label">Hidden (.current)</span>
        <a class="floating-contact-demo primary hidden-state" href="#floatingcontact">
          <div class="icon-wrapper">
            <Fragment set:html={message} />
          </div>
        </a>
      </div>
    </DSPreview>
  </DSBlock>

  <DSBlock title="Behavior">
    <DSPropsTable
      headers={["Condition", "State", "CSS"]}
      rows={[
        ["Desktop (>600px)", "Hidden", { code: "display: none" }],
        ["Mobile, #contact not visible", "Visible", "Default styles"],
        ["Mobile, #contact in viewport", "Hidden", { code: ".current class added" }],
      ]}
    />
  </DSBlock>

  <DSBlock title="Positioning">
    <DSPropsTable
      headers={["Property", "Value"]}
      rows={[
        [{ code: "position" }, "sticky"],
        [{ code: "bottom" }, "36px"],
        [{ code: "z-index" }, "300"],
        [{ code: "width" }, "36px"],
      ]}
    />
  </DSBlock>

  <DSBlock title="View Detection Integration">
    <DSNote>
      Uses <code>viewDetection</code> utility from <code>@/lib/dom/viewDetection</code> to detect when <code>#contact</code> section enters the viewport. The <code>.current</code> class is toggled to fade out the button.
    </DSNote>
  </DSBlock>

  <DSBlock title="Usage">
    <DSCode inline>&lt;FloatingContact /&gt;</DSCode>
    <DSNote>
      No props required. Component is self-contained with its own scroll detection logic.
    </DSNote>
  </DSBlock>
</section>

<style>
  .states-preview :global(.ds-preview) {
    gap: 48px;
  }
  .state-demo {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
  }
  .state-label {
    font-size: 13px;
    color: var(--color);
    opacity: 0.6;
  }
  .floating-contact-demo {
    width: 48px;
    height: 48px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-decoration: none;
    transition: all 0.3s ease;
  }
  .floating-contact-demo .icon-wrapper {
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .floating-contact-demo .icon-wrapper :global(svg) {
    width: 20px;
    height: 20px;
  }
  .floating-contact-demo .icon-wrapper :global(svg path) {
    fill: black;
  }
  .hover-state {
    transform: translateY(-4px);
    box-shadow: 0 4px 12px rgba(246, 177, 122, 0.3);
  }
  .hidden-state {
    opacity: 0.3;
    pointer-events: none;
  }
</style>
