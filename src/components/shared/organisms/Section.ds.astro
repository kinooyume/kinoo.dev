---
/**
 * Section Pattern Documentation
 * Design System - Organism
 * Shared pattern used by Experiences, Realisations, and Formations
 */
import Card from "@/components/shared/molecules/Card/Card.astro";
import CardContent from "@/components/shared/molecules/Card/CardContent.astro";
import CardTitle from "@/components/shared/molecules/Card/CardTitle.astro";
import Spotlight from "@/components/shared/molecules/Spotlight.astro";
import Tag from "@/components/shared/atoms/Tag.astro";


const themingCode = `#experiences {
  --accent-color: #f68dab;
  --secondary-accent-color: #f8c8d9;
  --card-title-font-size: 16px;
}`;
---

<!-- SECTION PATTERN -->
<section id="section-pattern">
  <h2>Section Pattern</h2>
  <p class="atomic-label">Organism</p>
  <p>Shared layout pattern used by Experiences, Realisations, and Formations sections. Combines section header, themed grid, and card-based content.</p>

  <div class="component-block">
    <h3>Pattern Overview</h3>
    <table class="props-table">
      <thead>
        <tr>
          <th>Section</th>
          <th>Color Theme</th>
          <th>Card Type</th>
          <th>Grid Layout</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>Experiences</code></td>
          <td><span class="color-dot" style="background: #f68dab;"></span> Pink (#f68dab)</td>
          <td>CardContent</td>
          <td>2-column masonry</td>
        </tr>
        <tr>
          <td><code>Realisations</code></td>
          <td><span class="color-dot" style="background: #66c384;"></span> Green (#66c384)</td>
          <td>CardSplit</td>
          <td>3-column</td>
        </tr>
        <tr>
          <td><code>Formations</code></td>
          <td><span class="color-dot" style="background: #9c85d3;"></span> Purple (#9c85d3)</td>
          <td>CardContent</td>
          <td>3-column</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="component-block">
    <h3>Section Header</h3>
    <div class="preview section-header-preview">
      <div class="section-header-demo">
        <span class="section-subtitle">Mes</span>
        <h2 class="section-h2">Exp√©riences</h2>
      </div>
    </div>
    <p class="note" style="margin-top: 12px;">
      All sections use <code>&lt;span class="subtitle"&gt;</code> + <code>&lt;h2&gt;</code> pattern with section-specific accent colors.
    </p>
  </div>

  <div class="component-block">
    <h3>Structure</h3>
    <div class="structure-diagram">
      <div class="structure-row">
        <code>&lt;section&gt;</code>
        <span class="structure-desc">Container with <code>data-animate-section</code></span>
      </div>
      <div class="structure-row indent">
        <code>&lt;span.subtitle&gt;</code>
        <span class="structure-desc">Section label (e.g., "Mes")</span>
      </div>
      <div class="structure-row indent">
        <code>&lt;h2&gt;</code>
        <span class="structure-desc">Section title</span>
      </div>
      <div class="structure-row indent">
        <code>&lt;div.grid&gt;</code>
        <span class="structure-desc">Grid with <code>data-spotlight</code></span>
      </div>
      <div class="structure-row indent-2">
        <code>&lt;Spotlight&gt;</code>
        <span class="structure-desc">Hover effect wrapper</span>
      </div>
      <div class="structure-row indent-3">
        <code>&lt;Card&gt;</code>
        <span class="structure-desc">Card container</span>
      </div>
      <div class="structure-row indent-4">
        <code>&lt;CardContent&gt;</code>
        <span class="structure-desc">or CardSplit for realisations</span>
      </div>
    </div>
  </div>

  <div class="component-block">
    <h3>Section Theming</h3>
    <p class="note" style="margin-bottom: 12px;">
      Each section overrides CSS custom properties for its color theme:
    </p>
    <div class="code-block">
      <pre><code>{themingCode}</code></pre>
    </div>
    <table class="props-table" style="margin-top: 16px;">
      <thead>
        <tr>
          <th>Variable</th>
          <th>Purpose</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>--accent-color</code></td>
          <td>Primary section color (subtitle, links, tags)</td>
        </tr>
        <tr>
          <td><code>--secondary-accent-color</code></td>
          <td>Lighter variant for hover states</td>
        </tr>
        <tr>
          <td><code>--card-title-font-size</code></td>
          <td>Title size override</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="component-block">
    <h3>Data Attributes</h3>
    <table class="props-table">
      <thead>
        <tr>
          <th>Attribute</th>
          <th>Element</th>
          <th>Purpose</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>data-animate-section</code></td>
          <td>section</td>
          <td>Triggers section reveal animation</td>
        </tr>
        <tr>
          <td><code>data-spotlight</code></td>
          <td>.grid</td>
          <td>Enables spotlight mouse tracking</td>
        </tr>
        <tr>
          <td><code>data-animate-elem</code></td>
          <td>cards</td>
          <td>Staggered card reveal</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="component-block">
    <h3>Grid Layouts</h3>
    <div class="grid-demos">
      <div class="grid-demo">
        <span class="grid-label">Experiences (2-col masonry)</span>
        <div class="grid-preview experiences-grid">
          <div class="cell span-2">Adeo</div>
          <div class="cell">Verty</div>
          <div class="cell span-rows">OPO</div>
          <div class="cell">Impact H.</div>
        </div>
      </div>
      <div class="grid-demo">
        <span class="grid-label">Formations (3-col)</span>
        <div class="grid-preview formations-grid">
          <div class="cell span-3">Epitech</div>
          <div class="cell">Manipal</div>
          <div class="cell">DernierCri</div>
          <div class="cell">Eurotunnel</div>
        </div>
      </div>
      <div class="grid-demo">
        <span class="grid-label">Realisations (3-col)</span>
        <div class="grid-preview realisations-grid">
          <div class="cell span-3">Arteflix</div>
          <div class="cell span-3">Ekeynox</div>
          <div class="cell span-3">kinoo.dev</div>
        </div>
      </div>
    </div>
  </div>

  <div class="component-block">
    <h3>Spotlight Integration</h3>
    <p class="note">
      Each section initializes the spotlight effect via script:
    </p>
    <div class="code-block" style="margin-top: 12px;">
      <pre><code>{`import { spotlight } from "@/lib/dom/spotlight";

const container = document.getElementById("experiences-grid");
if (container) spotlight(container);`}</code></pre>
    </div>
  </div>

  <div class="component-block">
    <h3>Demo</h3>
    <div class="preview preview-card section-demo" id="section-demo" data-spotlight>
      <Spotlight color="var(--pink)">
        <Card>
          <CardContent>
            <CardTitle
              slot="title"
              title="Example Card"
              tag="Demo"
              label="Company"
              location="Location"
              date="2024"
            />
            <p slot="description">
              This demonstrates the card pattern used in section grids.
            </p>
            <img
              slot="marge"
              src="/favicon.svg"
              alt="demo"
              style="width: 51px; height: 51px;"
            />
            <div class="row">
              <Tag title="Tag 1" />
              <Tag title="Tag 2" />
            </div>
          </CardContent>
        </Card>
      </Spotlight>
    </div>
  </div>
</section>

<script>
  import { spotlight } from "@/lib/dom/spotlight";

  const container = document.getElementById("section-demo");
  if (container) {
    spotlight(container);
  }
</script>

<style>
  .color-dot {
    display: inline-block;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    margin-right: 8px;
    vertical-align: middle;
  }

  .section-header-preview {
    flex-direction: column;
    align-items: flex-start;
  }

  .section-header-demo {
    display: flex;
    flex-direction: column;
  }

  .section-subtitle {
    font-size: 16px;
    color: var(--accent-color);
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .section-h2 {
    font-size: 48px;
    font-weight: 300;
    color: var(--color);
    margin: 0;
  }

  .structure-diagram {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 16px;
    background-color: rgba(0, 0, 0, 0.2);
    border-radius: 8px;
  }

  .structure-row {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .structure-row code {
    background-color: #1c2638;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 13px;
    color: var(--accent-bright);
    min-width: 140px;
  }

  .structure-desc {
    font-size: 14px;
    color: var(--color);
    opacity: 0.7;
  }

  .structure-desc code {
    min-width: auto;
    padding: 2px 6px;
  }

  .indent { padding-left: 20px; }
  .indent-2 { padding-left: 40px; }
  .indent-3 { padding-left: 60px; }
  .indent-4 { padding-left: 80px; }

  .code-block {
    background-color: rgba(0, 0, 0, 0.2);
    border-radius: 8px;
    padding: 16px;
    overflow-x: auto;
  }

  .code-block pre {
    margin: 0;
  }

  .code-block code {
    font-size: 13px;
    color: var(--light-color);
    line-height: 1.5;
  }

  .grid-demos {
    display: flex;
    flex-direction: column;
    gap: 24px;
  }

  .grid-demo {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .grid-label {
    font-size: 13px;
    color: var(--accent-color);
  }

  .grid-preview {
    display: grid;
    gap: 8px;
    background-color: rgba(0, 0, 0, 0.2);
    padding: 12px;
    border-radius: 8px;
  }

  .experiences-grid {
    grid-template-columns: repeat(2, 1fr);
    grid-template-rows: repeat(3, 40px);
  }

  .formations-grid {
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(2, 40px);
  }

  .realisations-grid {
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(3, 40px);
  }

  .cell {
    background-color: rgba(255, 255, 255, 0.1);
    border: 1px dashed rgba(255, 255, 255, 0.2);
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 11px;
    color: var(--color);
    opacity: 0.7;
  }

  .span-2 { grid-column: span 2; }
  .span-3 { grid-column: span 3; }
  .span-rows { grid-row: span 2; }

  .section-demo {
    --accent-color: #f68dab;
    --secondary-accent-color: #f8c8d9;
  }

  .row {
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 16px;
  }
</style>
