---
import externalLinkIcon from "@/svgs/external-link.svg?raw";

type Props = {
  href: string;
  text: string;
  external?: boolean;
  class?: string;
};

const { href, text, class: className, external: forceExternal } = Astro.props;
const isExternal = forceExternal ?? href.startsWith("http");

const externalProps = isExternal
  ? { target: "_blank", rel: "noreferrer nofollow noopener" }
  : {};

const hasPrepend = Astro.slots.has("prepend");
const hasAppend = Astro.slots.has("append");
---

<a class:list={["link", className]} href={href} {...externalProps}>
  {hasPrepend && <span class="link-slot"><slot name="prepend" /></span>}
  {text}
  {hasAppend && <span class="link-slot"><slot name="append" /></span>}
  {isExternal && !hasAppend && <Fragment set:html={externalLinkIcon} />}
</a>

<style>
  a {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-size: var(--font-size);
    color: var(--accent-color, var(--light-color));
    stroke: var(--accent-color, var(--light-color));
    opacity: 0.6;
    transition: all 0.3s ease;
    text-decoration: underline;
  }

  a:hover {
    opacity: 1;
    transform: translateY(-4px);
  }

  a:active {
    transform: translateY(5px);
    transition: 200ms;
  }

  .link-slot {
    display: inline-flex;
    align-items: center;
  }

  .link-slot :global(svg),
  a > :global(svg) {
    width: 12px;
    height: 12px;
  }
</style>
