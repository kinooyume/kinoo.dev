---
import IconButtonComponent from "./IconButton.astro";
import BurgerIcon from "./BurgerIcon.astro";
import DSBlock from "@/components/design-system/DSBlock.astro";
import DSPreview from "@/components/design-system/DSPreview.astro";
import DSCode from "@/components/design-system/DSCode.astro";
import DSPropsTable from "@/components/design-system/DSPropsTable.astro";
import DSNote from "@/components/design-system/DSNote.astro";
import DSSectionHeader from "@/components/design-system/DSSectionHeader.astro";

import message from "@/svgs/message.svg?raw";
---

<section id="iconbutton">
  <DSSectionHeader title="IconButton" atomic="Atom" framework="astro" />

  <DSBlock title="Default Color">
    <DSPreview>
      <IconButtonComponent label="Message">
        <Fragment set:html={message} />
      </IconButtonComponent>
      <IconButtonComponent label="Menu">
        <BurgerIcon />
      </IconButtonComponent>
    </DSPreview>
    <DSCode inline
      >&lt;IconButton label="Menu"&gt;&lt;BurgerIcon /&gt;&lt;/IconButton&gt;</DSCode
    >
  </DSBlock>

  <DSBlock title="Primary Color">
    <DSPreview>
      <IconButtonComponent label="Contact" color="primary" class="primary-demo">
        <Fragment set:html={message} />
      </IconButtonComponent>
    </DSPreview>
    <DSCode inline
      >&lt;IconButton label="Contact" color="primary"&gt;...&lt;/IconButton&gt;</DSCode
    >
  </DSBlock>

  <DSBlock title="As Link">
    <DSPreview>
      <IconButtonComponent
        label="Contact"
        href="#iconbutton"
        color="primary"
        class="primary-demo"
      >
        <Fragment set:html={message} />
      </IconButtonComponent>
    </DSPreview>
    <DSCode inline
      >&lt;IconButton label="Contact" href="#contact"
      color="primary"&gt;...&lt;/IconButton&gt;</DSCode
    >
    <DSNote
      >When <code>href</code> is provided, renders as <code>&lt;a&gt;</code> instead
      of <code>&lt;button&gt;</code>.</DSNote
    >
  </DSBlock>

  <DSBlock title="With Open State">
    <DSPreview>
      <IconButtonComponent label="Menu" class="open">
        <BurgerIcon />
      </IconButtonComponent>
    </DSPreview>
    <DSNote
      >Add <code>.open</code> class to trigger BurgerIcon animation.</DSNote
    >
  </DSBlock>

  <DSBlock title="Props">
    <DSPropsTable
      headers={["Prop", "Type", "Default", "Description"]}
      rows={[
        [{ code: "label" }, "string", "required", "Accessible aria-label"],
        [{ code: "id" }, "string", "-", "Optional ID for JavaScript targeting"],
        [
          { code: "href" },
          "string",
          "-",
          "If provided, renders as <a> instead of <button>",
        ],
        [
          { code: "variant" },
          '"default" | "floating"',
          '"default"',
          "Floating adds fixed position and shadow",
        ],
        [
          { code: "color" },
          '"default" | "primary"',
          '"default"',
          "Color scheme",
        ],
        [{ code: "class" }, "string", "-", "Additional CSS classes"],
      ]}
    />
  </DSBlock>

</section>

<style>
  section :global(.icon-button svg) {
    width: 20px;
    height: 20px;
    opacity: 0.8;
  }

  section :global(.icon-button svg path) {
    fill: var(--accent-color);
  }

  section :global(.icon-button--primary svg path) {
    fill: var(--background-color);
  }
</style>
