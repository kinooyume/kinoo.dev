---
/**
 * Compositions Documentation
 * Design System - Templates
 * Shows how components combine in real usage
 */
import Card from "@/components/shared/molecules/Card/Card.astro";
import CardContent from "@/components/shared/molecules/Card/CardContent.astro";
import CardTitle from "@/components/shared/molecules/Card/CardTitle.astro";
import Spotlight from "@/components/shared/molecules/Spotlight.astro";
import Tag from "@/components/shared/atoms/Tag.astro";
import DSBlock from "@/components/design-system/DSBlock.astro";
import DSPreview from "@/components/design-system/DSPreview.astro";
import DSCode from "@/components/design-system/DSCode.astro";
import DSPropsTable from "@/components/design-system/DSPropsTable.astro";
import DSNote from "@/components/design-system/DSNote.astro";

const experienceStructure = `<Spotlight color="var(--pink)">
  <Card>
    <CardContent>
      <CardTitle slot="title" ... />
      <p slot="description">...</p>
      <ul>...</ul>
      <img slot="marge" ... />
    </CardContent>
  </Card>
</Spotlight>`;

const heroStructure = `<div class="title">
  <HeroSubtitle subtitle="Développeur Frontend Freelance" />
  <h1><span>Martin</span> <span>Kinoo</span></h1>
</div>`;

const tagsStructure = `<ul>
  {techs.map(tech => (
    <li>
      <Tag
        title={tech.title}
        hero={true}
        icon={tech.icon}
        highlight={tech.highlight}
      />
    </li>
  ))}
</ul>`;

const sectionStructure = `<section id="experiences">
  <span class="subtitle">Mes</span>
  <h2>Expériences</h2>
  ...
</section>`;
---

<section id="compositions">
  <h2>Compositions</h2>
  <p class="atomic-label">Templates</p>
  <p>Real-world examples showing how atoms, molecules, and organisms combine to create complete UI patterns.</p>

  <DSBlock title="Experience Card">
    <DSNote>
      The primary card pattern used in the Experiences section. Combines Spotlight, Card, CardContent, and CardTitle.
    </DSNote>
    <DSPreview class="preview-card" id="compositions-spotlight" data-spotlight>
      <Spotlight color="var(--pink)">
        <Card>
          <CardContent>
            <CardTitle
              slot="title"
              title="Lead Developer"
              tag="Freelance"
              href="https://example.com"
              label="Company"
              location="Lille"
              date="2024"
            />
            <p slot="description">
              Description of the role and responsibilities. Includes <strong>highlighted</strong> technologies and achievements.
            </p>
            <ul>
              <li>Feature or responsibility one</li>
              <li>Feature or responsibility two</li>
            </ul>
            <div slot="marge" class="logo-placeholder">Logo</div>
          </CardContent>
        </Card>
      </Spotlight>
    </DSPreview>
    <DSCode>{experienceStructure}</DSCode>
  </DSBlock>

  <DSBlock title="Hero Title Block">
    <DSNote>
      The hero section title pattern combining HeroSubtitle (animated) with the main h1.
    </DSNote>
    <DSPreview class="hero-preview">
      <div class="hero-demo">
        <span class="subtitle-demo">
          <span class="text-wrapper">Développeur Frontend Freelance</span>
        </span>
        <h1 class="hero-h1"><span>Martin</span> <span>Kinoo</span></h1>
      </div>
    </DSPreview>
    <DSCode>{heroStructure}</DSCode>
  </DSBlock>

  <DSBlock title="Tech Stack Tags">
    <DSNote>
      A collection of Tag components displaying technology stack. Used in Hero section.
    </DSNote>
    <DSPreview>
      <Tag title="TypeScript" hero={true} highlight={true} />
      <Tag title="React" hero={true} highlight={true} />
      <Tag title="Svelte" hero={true} />
      <Tag title="Go" hero={true} />
    </DSPreview>
    <DSCode>{tagsStructure}</DSCode>
  </DSBlock>

  <DSBlock title="Section Header">
    <DSNote>
      Standard section header pattern with subtitle and main heading. Used across all main sections.
    </DSNote>
    <DSPreview class="section-header-preview">
      <div class="section-header-demo">
        <span class="section-subtitle">Mes</span>
        <h2 class="section-h2">Expériences</h2>
      </div>
    </DSPreview>
    <DSCode>{sectionStructure}</DSCode>
  </DSBlock>

  <DSBlock title="Component Hierarchy">
    <DSPropsTable
      headers={["Pattern", "Components Used", "Location"]}
      rows={[
        ["Experience Card", "Spotlight / Card / CardContent / CardTitle", "Experiences section"],
        ["Realisation Card", "Spotlight / Card / CardSplit / H3Tagged + Slider", "Realisations section"],
        ["Formation Card", "Card / CardContent / CardTitle", "Formations section"],
        ["Hero Block", "HeroSubtitle + h1 + Tags list", "Hero section"],
        ["Page Layout", "Header + main content + FloatingContact", "All pages"],
      ]}
    />
  </DSBlock>
</section>

<script>
  import { spotlight } from "@/lib/dom/spotlight";

  const container = document.getElementById("compositions-spotlight");
  if (container) {
    spotlight(container);
  }
</script>

<style>
  .logo-placeholder {
    width: 51px;
    height: 51px;
    background-color: rgba(255, 255, 255, 0.1);
    border: 1px dashed rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    color: var(--color);
    opacity: 0.6;
  }
  :global(.ds-preview) ul {
    list-style: initial;
    margin-left: 24px;
    margin-top: 12px;
  }
  :global(.ds-preview) ul li {
    color: var(--light-color);
    font-weight: 200;
  }
  .hero-preview :global(.ds-preview) {
    flex-direction: column;
    align-items: flex-start;
  }
  .hero-demo {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  .subtitle-demo {
    font-size: 28px;
    font-weight: 100;
    color: var(--accent-color);
  }
  .hero-h1 {
    font-size: 64px;
    font-weight: 200;
    color: var(--color);
    margin: 0;
    line-height: 1;
  }
  .hero-h1 span {
    display: inline-block;
  }
  .section-header-preview :global(.ds-preview) {
    flex-direction: column;
    align-items: flex-start;
  }
  .section-header-demo {
    display: flex;
    flex-direction: column;
  }
  .section-subtitle {
    font-size: 16px;
    color: var(--accent-color);
    text-transform: uppercase;
    letter-spacing: 1px;
  }
  .section-h2 {
    font-size: 48px;
    font-weight: 300;
    color: var(--color);
    margin: 0;
  }
</style>
