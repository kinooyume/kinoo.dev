---
/**
 * Compositions Documentation
 * Design System - Templates
 * Shows how components combine in real usage
 */
import Card from "./Card.astro";
import CardContent from "./CardContent.astro";
import CardTitle from "./CardTitle.astro";
import Spotlight from "./Spotlight.astro";
import Tag from "./Tag.astro";

const experienceStructure = `<Spotlight color="var(--pink)">
  <Card>
    <CardContent>
      <CardTitle slot="title" ... />
      <p slot="description">...</p>
      <ul>...</ul>
      <img slot="marge" ... />
    </CardContent>
  </Card>
</Spotlight>`;

const heroStructure = `<div class="title">
  <HeroSubtitle subtitle="Développeur Frontend Freelance" />
  <h1><span>Martin</span> <span>Kinoo</span></h1>
</div>`;

const tagsStructure = `<ul>
  {techs.map(tech => (
    <li>
      <Tag
        title={tech.title}
        hero={true}
        icon={tech.icon}
        highlight={tech.highlight}
      />
    </li>
  ))}
</ul>`;

const sectionStructure = `<section id="experiences">
  <span class="subtitle">Mes</span>
  <h2>Expériences</h2>
  ...
</section>`;
---

<section id="compositions">
  <h2>Compositions</h2>
  <p class="atomic-label">Templates</p>
  <p>Real-world examples showing how atoms, molecules, and organisms combine to create complete UI patterns.</p>

  <div class="component-block">
    <h3>Experience Card</h3>
    <p class="note" style="margin-bottom: 16px;">
      The primary card pattern used in the Experiences section. Combines Spotlight, Card, CardContent, and CardTitle.
    </p>
    <div class="preview preview-card" id="compositions-spotlight" data-spotlight>
      <Spotlight color="var(--pink)">
        <Card>
          <CardContent>
            <CardTitle
              slot="title"
              title="Lead Developer"
              tag="Freelance"
              href="https://example.com"
              label="Company"
              location="Lille"
              date="2024"
            />
            <p slot="description">
              Description of the role and responsibilities. Includes <strong>highlighted</strong> technologies and achievements.
            </p>
            <ul>
              <li>Feature or responsibility one</li>
              <li>Feature or responsibility two</li>
            </ul>
            <div slot="marge" class="logo-placeholder">Logo</div>
          </CardContent>
        </Card>
      </Spotlight>
    </div>
    <div class="component-structure">
      <h4>Structure</h4>
      <pre><code>{experienceStructure}</code></pre>
    </div>
  </div>

  <div class="component-block">
    <h3>Hero Title Block</h3>
    <p class="note" style="margin-bottom: 16px;">
      The hero section title pattern combining HeroSubtitle (animated) with the main h1.
    </p>
    <div class="preview hero-preview">
      <div class="hero-demo">
        <span class="subtitle-demo">
          <span class="text-wrapper">Développeur Frontend Freelance</span>
        </span>
        <h1 class="hero-h1"><span>Martin</span> <span>Kinoo</span></h1>
      </div>
    </div>
    <div class="component-structure">
      <h4>Structure</h4>
      <pre><code>{heroStructure}</code></pre>
    </div>
  </div>

  <div class="component-block">
    <h3>Tech Stack Tags</h3>
    <p class="note" style="margin-bottom: 16px;">
      A collection of Tag components displaying technology stack. Used in Hero section.
    </p>
    <div class="preview">
      <Tag title="TypeScript" hero={true} highlight={true} />
      <Tag title="React" hero={true} highlight={true} />
      <Tag title="Svelte" hero={true} />
      <Tag title="Go" hero={true} />
    </div>
    <div class="component-structure">
      <h4>Structure</h4>
      <pre><code>{tagsStructure}</code></pre>
    </div>
  </div>

  <div class="component-block">
    <h3>Section Header</h3>
    <p class="note" style="margin-bottom: 16px;">
      Standard section header pattern with subtitle and main heading. Used across all main sections.
    </p>
    <div class="preview section-header-preview">
      <div class="section-header-demo">
        <span class="section-subtitle">Mes</span>
        <h2 class="section-h2">Expériences</h2>
      </div>
    </div>
    <div class="component-structure">
      <h4>Structure</h4>
      <pre><code>{sectionStructure}</code></pre>
    </div>
  </div>

  <div class="component-block">
    <h3>Component Hierarchy</h3>
    <table class="props-table">
      <thead>
        <tr>
          <th>Pattern</th>
          <th>Components Used</th>
          <th>Location</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Experience Card</td>
          <td>Spotlight / Card / CardContent / CardTitle</td>
          <td>Experiences section</td>
        </tr>
        <tr>
          <td>Realisation Card</td>
          <td>Spotlight / Card / CardSplit / H3Tagged + Slider</td>
          <td>Realisations section</td>
        </tr>
        <tr>
          <td>Formation Card</td>
          <td>Card / CardContent / CardTitle</td>
          <td>Formations section</td>
        </tr>
        <tr>
          <td>Hero Block</td>
          <td>HeroSubtitle + h1 + Tags list</td>
          <td>Hero section</td>
        </tr>
        <tr>
          <td>Page Layout</td>
          <td>Header + main content + FloatingContact</td>
          <td>All pages</td>
        </tr>
      </tbody>
    </table>
  </div>
</section>

<script>
  import { spotlight } from "@/lib/dom/spotlight";

  const container = document.getElementById("compositions-spotlight");
  if (container) {
    spotlight(container);
  }
</script>

<style>
  .logo-placeholder {
    width: 51px;
    height: 51px;
    background-color: rgba(255, 255, 255, 0.1);
    border: 1px dashed rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    color: var(--color);
    opacity: 0.6;
  }
  .preview ul {
    list-style: initial;
    margin-left: 24px;
    margin-top: 12px;
  }
  .preview ul li {
    color: var(--light-color);
    font-weight: 200;
  }
  .component-structure {
    margin-top: 16px;
    background-color: rgba(0, 0, 0, 0.2);
    border-radius: 8px;
    padding: 16px;
  }
  .component-structure h4 {
    font-size: 14px;
    color: var(--accent-color);
    margin: 0 0 12px 0;
  }
  .component-structure pre {
    margin: 0;
    overflow-x: auto;
  }
  .component-structure code {
    font-size: 13px;
    color: var(--light-color);
    line-height: 1.5;
  }
  .hero-preview {
    flex-direction: column;
    align-items: flex-start;
  }
  .hero-demo {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  .subtitle-demo {
    font-size: 28px;
    font-weight: 100;
    color: var(--accent-color);
  }
  .hero-h1 {
    font-size: 64px;
    font-weight: 200;
    color: var(--color);
    margin: 0;
    line-height: 1;
  }
  .hero-h1 span {
    display: inline-block;
  }
  .section-header-preview {
    flex-direction: column;
    align-items: flex-start;
  }
  .section-header-demo {
    display: flex;
    flex-direction: column;
  }
  .section-subtitle {
    font-size: 16px;
    color: var(--accent-color);
    text-transform: uppercase;
    letter-spacing: 1px;
  }
  .section-h2 {
    font-size: 48px;
    font-weight: 300;
    color: var(--color);
    margin: 0;
  }
</style>
