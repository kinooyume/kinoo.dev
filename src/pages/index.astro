---
import Layout from "@/layouts/Layout.astro";
import Hero from "@/components/Hero.astro";
import Experiences from "@/components/Experiences.astro";
import Contact from "@/components/Contact.astro";
import Formations from "@/components/Formations.astro";
import Realisations from "@/components/Realisations.astro";
import FloatingContact from "@/components/FloatingContact.astro";
---

<Layout title="Martin Kinoo · Développeur Front-end freelance">
  <script>
    import { revealSections } from "@/lib/dom/revealSection";
    import { revealCards } from "@/lib/dom/revealCard";

    // Reset scroll on back-forward navigation
    if (window.scrollY !== 0) {
      const nav = performance.getEntriesByType("navigation")[0];
      const isBfCache =
        performance.navigation && performance.navigation.type === 2;
      if (nav || isBfCache) {
        window.scrollTo({ top: 0, behavior: "auto" });
      }
    }

    function initRevealAnimations() {
      if (!window.heroAnimationCompleted) return;
      revealSections();
      revealCards();
    }

    window.addEventListener("heroAnimationComplete", initRevealAnimations);
    document.addEventListener("DOMContentLoaded", () => {
      setTimeout(initRevealAnimations, 100);
    });
  </script>
  <main>
    <Hero />
    <Experiences />
    <Realisations />
    <Formations />
    <Contact />
    <footer>
      <p>
        © 2024 · Design et Code par <b>Martin Kinoo</b> · Réalisé avec <a
          href="https://figma.com">Figma</a
        > et <a href="https://astro.build">Astro</a>.
      </p>
    </footer>
    <FloatingContact />
  </main>
</Layout>

<style>
  [data-animate-card] > * {
    opacity: 0;
    transform: translateY(30px);
  }
  footer {
    opacity: 0.8;
  }
  footer a {
    text-decoration: underline;
  }
  main {
    margin: auto;
    padding: 1rem 32px;
    max-width: 1368px;
    line-height: 1.6;
  }
  footer p {
    font-size: 15px;
    display: block;
    margin: 36px 0;
  }

  @media screen and (max-width: 900px) {
    main {
      padding: 1rem 16px;
    }
  }
</style>
